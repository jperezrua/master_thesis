%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%2345678901234567890123456789012345678901234567890123456789012345678901234567890
%        1         2         3         4         5         6         7         8

%\documentclass[letterpaper, 10 pt, conference]{ieeeconf}  % Comment this line out
                                                          % if you need a4paper
\documentclass[a4paper, 10pt, conference]{ieeeconf}      % Use this line for a4
                                                          % paper

\IEEEoverridecommandlockouts                              % This command is only
                                                          % needed if you want to
                                                          % use the \thanks command
\overrideIEEEmargins
% See the \addtolength command later in the file to balance the column lengths
% on the last page of the document



% The following packages can be found on http:\\www.ctan.org
%\usepackage{graphics} % for pdf, bitmapped graphics files
%\usepackage{epsfig} % for postscript graphics files
%\usepackage{mathptmx} % assumes new font selection scheme installed
%\usepackage{times} % assumes new font selection scheme installed
%\usepackage{amsmath} % assumes amsmath package installed
%\usepackage{amssymb}  % assumes amsmath package installed

\title{\LARGE \bf
Superpixel flow
}

%\author{ \parbox{3 in}{\centering Huibert Kwakernaak*
%         \thanks{*Use the $\backslash$thanks command to put information here}\\
%         Faculty of Electrical Engineering, Mathematics and Computer Science\\
%         University of Twente\\
%         7500 AE Enschede, The Netherlands\\
%         {\tt\small h.kwakernaak@autsubmit.com}}
%         \hspace*{ 0.5 in}
%         \parbox{3 in}{ \centering Pradeep Misra**
%         \thanks{**The footnote marks may be inserted manually}\\
%        Department of Electrical Engineering \\
%         Wright State University\\
%         Dayton, OH 45435, USA\\
%         {\tt\small pmisra@cs.wright.edu}}
%}

\author{Juan Perez Rua% <-this % stops a space
\thanks{This work was supported by Technicolor SA}% <-this % stops a space
\thanks{Juan Perez Rua  is with Technicolor R\&D and the University of Burgundy,
        {\tt\small juanmanuel.perezrua@technicolor.com}}%
}


\begin{document}



\maketitle
\thispagestyle{empty}
\pagestyle{empty}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\begin{abstract}

Super-pixels and over segmentation techniques
became a widely used pre-processing stage for a
large number of machine vision applications after the
original concept was introduced []. Super-pixels are
traditionally used as performance booster for several
other techniques. However, it is still mostly related to
single frame processing [][][]. In the search for
consistency in super-pixel labeling through video,
some authors have proposed different techniques,
which go from simple extension to super-voxels[][][],
to more complicated approaches [][]. These
approaches, nonetheless, usually require a global
processing and knowledge of all (or several) the
video frames beforehand. We propose a super-pixel
matching technique which assumes a flow-like
behavior in the image sequences (natural video), and
propose an application for improving image based
segmentation.


\end{abstract}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{INTRODUCTION}

For some kind of video sequences and computer vision
applications the video consistency is not well preserved (I.e
long term tracking, moving camera videos, etc.). Usually,
the super-pixel labelling loses coherency between frames, 
even when computed as super-voxels. 
This means super pixel matching techniques offer some interest and can still be
explored. Some work have been done towards a
super-pixel based image comparison using the Earth
Mover’s Distance, by taking super pixels as bins of a
global histogram []. The label propagation or superpixel flow can be
achieved with this technique by selecting the super-
pixel in the second frame that maximize the flow
from each super-pixel in the first frame.
However, we look at the problem of super-pixel
propagation between a pair of frames, in terms of the
indexes of the already computed superpixelization in
both of them. Thus, the propagation means finding
the super-pixel label in the second frame that
correspond to a given label in the first frame. This
matching, however, has to comply with a set of
constraints. Firstly, two correspondent super-pixels
should be similar in terms of some appearance
feature, which most likely depends on the way the
superpixelization was performed (color, texture,
shape). Also, the super-pixel propagation should
maintain certain global homogeneity (at least for
super-pixels that belong to the same object). This is
because the super-pixel propagation or matching is
not completely a one-to-one combinatorial problem,
but more a “superpixel flow”. In this sense, it seems
natural that the problem of super-pixel propagation
could be solved with a discrete energy minimization
procedure. If the size homogeneity of the superpixels is maintained, 
it actually seems to share some of the properties of the
optical flow problem, with the difference that the
smoothness is usually a very strong constraint for the
last one. The strength of this smoothness prior relies
not only in the nature of the problem, but also
because it gives better cues towards an easy-to-
minimize global approach.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{PROBLEM DEFINITION}

The objective of the super-pixel propagation is
therefore to find the best labeling $L$ for every superpixel $p$
(with $L_p \in {0,1,...N-1}$) between a pair
of frames ($I_{1}$,$I_{2}$), but holding a flow-like behavior.
Thus, the superpixelization should maintain certain
regularity in size within a single frame. Some super
pixel techniques can cope with this requirement [][].
For the experiments presented in this work, we prefer
the SLIC (``Fig. 1'') method [], which usually gives
good results in homogeneity of the superpixelization.
The proposed steps to solve the propagation problem
assume this requirement is hold. For other kind of the
techniques, other approaches should be followed.



%\addtolength{\textheight}{-3cm}   % This command serves to balance the column lengths
                                  % on the last page of the document manually. It shortens
                                  % the textheight of the last page by a suitable amount.
                                  % This command does not take effect until the next page
                                  % so it should come on the page before the last. Make
                                  % sure that you do not shorten the textheight too much.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\subsection{Energy Formulation}

Inspired by a large number of optical flow and stereo
techniques [][][][], the super-pixel propagation can be
modeled with pairwise Markov Random Fields. If
the matching is performed with MAP inference, its
posterior probability is: 
$$ P(L|I_0,I_1) = \displaystyle \prod_{p \in \Omega} \mathrm{e}^{-D_p(L_p;I_0,I_1)} 
\prod_{p,q \in \mathcal{N}_p} \mathrm{e}^{-S_{p,q}(L_p;L_q)}$$

With $L$ the set of labels of the super pixels in $I_0$,
that match with those in $I_1$.
$ \mathcal{N}_p $ is a neighborhood of the
superpixel $p$, which defines its adjacency. Given this posterior probability,
the equivalent energy function can be directly obtained
by extracting the negative logarithm of the posterior,

$$ E(L) = \displaystyle \sum_{p \in \Omega} -D_p(L_p;I_0,I_1) +
\sum_{p,q \in \mathcal{N}_p} -S_{p,q}(L_p,L_q) $$

The terms $D$, and $S$ stand for data and spatial as they
are popularly known in the MRF literature. The first
one determines how accurate is the labeling in terms
of consistency of the measured data (Color, Shape,
etc.). In the optical flow counterpart of this equation,
usually the data term correspond to the pixel
brightness [][][]. However, as superpixels are a set
of similar (or somehow homogenous) pixels, an
adequate color based feature can be a low binned
histogram or its average color. So it can be written 
more precisely as

$$ D_p(L;I_0,I_1) = \rho(h(p),h(p')) $$

Where $h(p)$ and $h(p')$ are the histograms of the super-
pixel $p$ and its correspondent superpixel in the
second frame ($I_1$). $rho$ can be replaced by the Bhattacharyya
 distance. Note that the low binned histogram or
average color gives certain robustness against noise,
and slowly changing colors between frames.
The spatial term is a penalty function for horizontal
and vertical changes of the vectors that have origin in
the centroid of the super-pixel of the first frame and
end in the centroid of the super-pixel of the second
frame.


\subsection{Numbering}

Number reference citations consecutively in square brackets \cite{c1}.
 The sentence punctuation follows the brackets \cite{c2}.
 Refer simply to the reference number, as in \cite{c3}.
 Do not use ``ref. \cite{c3}'' or ``reference \cite{c3}''.
Number footnotes separately in superscripts\footnote{This is a footnote}
Place the actual footnote at the bottom of the column in which it is cited.
Do not put footnotes in the reference list.
Use letters for table footnotes (see Table I).

\subsection{Abbreviations and Acronyms}

Define abbreviations and acronyms the first time they are used in the text,
even after they have been defined in the abstract. Abbreviations such as
IEEE, SI, CGS, ac, dc, and rms do not have to be defined. Do not use
abbreviations in the title unless they are unavoidable.

\subsection{Equations}

Number equations consecutively with equation numbers in parentheses flush
 with the right margin, as in (1). To make your equations more compact
 you may use the solidus (/), the exp. function, or appropriate exponents.
  Italicize Roman symbols for quantities and variables, but not Greek symbols.
   Use a long dash rather then hyphen for a minus sign. Use parentheses to avoid
    ambiguities in the denominator.
Punctuate equations with commas or periods when they are part of a sentence:
$$\Gamma_2 a^2 + \Gamma_3 a^3 + \Gamma_4 a^4 + ... = \lambda \Lambda(x),$$
where $\lambda$ is an auxiliary parameter.

Be sure that the symbols in your equation have been defined before the
equation appears or immediately following.
Use ``(1),'' not ``Eq. (1)'' or ``Equation (1),''
except at the beginning of a sentence: ``Equation (1) is ...''.

   \begin{figure}[thpb]
      \centering
      %\includegraphics[scale=1.0]{figurefile}
      \caption{Inductance of oscillation winding on amorphous
       magnetic core versus DC bias magnetic field}
      \label{figurelabel}
   \end{figure}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{CONCLUSIONS AND FUTURE WORKS}

\subsection{Conclusions}

This is a repeat.
Position figures and tables at the tops and bottoms of columns.
Avoid placing them in the middle of columns. Large figures and tables
may span across both columns. Figure captions should be below the figures;
 table captions should be above the tables. Avoid placing figures and tables
  before their first mention in the text. Use the abbreviation ``Fig. 1'',
  even at the beginning of a sentence.
Figure axis labels are often a source of confusion.
Try to use words rather then symbols. As an example write the quantity ``Inductance",
 or ``Inductance L'', not just.
 Put units in parentheses. Do not label axes only with units.
 In the example, write ``Inductance (mH)'', or ``Inductance L (mH)'', not just ``mH''.
 Do not label axes with the ratio of quantities and units.
 For example, write ``Temperature (K)'', not ``Temperature/K''.


\subsection{Future Works}

This is a repeat.
Position figures and tables at the tops and bottoms of columns.
Avoid placing them in the middle of columns. Large figures and tables
may span across both columns. Figure captions should be below the figures;
 table captions should be above the tables. Avoid placing figures and tables
  before their first mention in the text. Use the abbreviation ``Fig. 1'',
  even at the beginning of a sentence.
Figure axis labels are often a source of confusion.
Try to use words rather then symbols. As an example write the quantity ``Inductance",
 or ``Inductance L'', not just.
 Put units in parentheses. Do not label axes only with units.
 In the example, write ``Inductance (mH)'', or ``Inductance L (mH)'', not just ``mH''.
 Do not label axes with the ratio of quantities and units.
 For example, write ``Temperature (K)'', not ``Temperature/K''.

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\section{ACKNOWLEDGMENTS}

The authors gratefully acknowledge the contribution of National Research Organization and reviewers' comments.


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

References are important to the reader; therefore, each citation must be complete and correct. If at all possible, references should be commonly available publications.

\begin{thebibliography}{99}

\bibitem{c1}
J.G.F. Francis, The QR Transformation I, {\it Comput. J.}, vol. 4, 1961, pp 265-271.

\bibitem{c2}
H. Kwakernaak and R. Sivan, {\it Modern Signals and Systems}, Prentice Hall, Englewood Cliffs, NJ; 1991.

\bibitem{c3}
D. Boley and R. Maier, "A Parallel QR Algorithm for the Non-Symmetric Eigenvalue Algorithm", {\it in Third SIAM Conference on Applied Linear Algebra}, Madison, WI, 1988, pp. A20.

\end{thebibliography}

\end{document}
